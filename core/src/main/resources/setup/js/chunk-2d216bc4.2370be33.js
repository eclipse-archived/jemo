(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d216bc4"],{c474:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"ma-5",attrs:{"grid-list-md":""}},[e.downloadFormsOnly||e.clusterCreated||e.error?e._e():r("div",[r("h3",[e._v("Please wait while Jemo creates the cluster. This can take up to 15 minutes.")]),r("v-progress-linear",{attrs:{indeterminate:!0}}),e.clusterCreationResponse?r("div",[r("pre",[e._v(e._s(e.clusterCreationResponse.output))]),r("div",{staticClass:"pa-3"},[r("v-progress-circular",{attrs:{indeterminate:"",size:16}})],1)]):e._e()],1),e.error?r("div",["TERRAFORM_NOT_INSTALLED"===e.error.code?r("div",[r("h3",[e._v("The server can not find the terraform command.")]),e._v("\n            Either terraform is not installed ("),r("a",{attrs:{href:"https://learn.hashicorp.com/terraform/getting-started/install.html",target:"_blank"}},[e._v("Installation\n            instructions")]),e._v("),\n            or it is not in the path. (e.g. run: terraform -version).\n            "),r("br"),r("br"),r("v-btn",{attrs:{color:"primary",loading:e.loading},on:{click:function(t){e.createCluster(!0)}}},[e._v("Fixed")])],1):"KUBECTL_NOT_INSTALLED"===e.error.code?r("div",[r("h3",[e._v("The server can not find the kubectl command.")]),e._v("\n            Either kubectl is not installed ("),r("a",{attrs:{href:"https://kubernetes.io/docs/tasks/tools/install-kubectl/",target:"_blank"}},[e._v("Installation\n            instructions")]),e._v("),\n            or it is not in the path. (e.g. run: kubectl --help).\n            "),r("br"),r("br"),r("v-btn",{attrs:{color:"primary",loading:e.loading},on:{click:function(t){e.createCluster(!0)}}},[e._v("Fixed")])],1):r("div",[r("h3",[e._v("Terraform failed to create the cluster. The following error occurred:")]),r("pre",[e._v(e._s(e.error.message))]),r("br"),r("v-btn",{attrs:{to:{name:"delete",params:{csp:this.csp,mode:"CLUSTER"}},color:"primary"}},[e._v("Revert")])],1)]):e._e(),e.clusterCreated?r("div",[r("h3",[e._v("Setup Completed")]),r("br"),e._v("\n        Great job! The cluster is created.\n        "),r("br"),e._v("\n        You can access jemo on "),r("a",{attrs:{href:e.clusterCreationResponse.loadBalancerUrl,target:"_blank"}},[e._v(e._s(e.clusterCreationResponse.loadBalancerUrl))]),e._v(".\n        You may need to wait 1-2 minutes before accessing it.\n        "),r("br"),r("br"),e._v("\n        Terraform reported the following created resources and outputs.\n        "),r("br"),r("br"),r("v-toolbar",{attrs:{flat:"",color:"white"}},[r("v-toolbar-title",[e._v("Created Resources")])],1),r("v-data-table",{staticClass:"elevation-1",attrs:{items:e.createItems(e.clusterCreationResponse.terraformResult.createdResources),"hide-actions":"","hide-headers":""},scopedSlots:e._u([{key:"items",fn:function(t){return[r("td",[e._v(e._s(t.item.name))]),r("td",[e._v(e._s(t.item.value))])]}}])}),r("br"),r("v-toolbar",{attrs:{flat:"",color:"white"}},[r("v-toolbar-title",[e._v("Outputs")])],1),r("v-data-table",{staticClass:"elevation-1",attrs:{items:e.createItems(e.clusterCreationResponse.terraformResult.outputs),"hide-actions":"","hide-headers":""},scopedSlots:e._u([{key:"items",fn:function(t){return[r("td",[e._v(e._s(t.item.name))]),r("td",[e._v(e._s(t.item.value))])]}}])}),r("br")],1):e._e(),e.terraformFilesDownloaded?r("div",[r("h3",[e._v("Please unzip the downloaded file, open the file 'README.txt' and follow the instructions.")])]):e._e()])},s=[],o=(r("7f7f"),{data:function(){return{csp:this.$route.params.csp,parameters:this.$route.params.parameters,downloadFormsOnly:this.$route.params.downloadFormsOnly,clusterCreated:!1,error:null,clusterCreationResponse:null,terraformFilesDownloaded:!1,timer:null,loading:!1}},watch:{$route:function(e){"create-cluster"===e.name&&(this.csp=e.params.csp?e.params.csp:this.csp,this.parameters=e.params.parameters?e.params.parameters:this.parameters,this.downloadFormsOnly=e.params.downloadFormsOnly,this.clusterCreated=!1,this.loading=!1,this.createCluster(!1))}},mounted:function(){this.createCluster(!1)},methods:{createCluster:function(e){var t=this;this.loading=e;var r={csp:this.csp.name,parameters:this.parameters};this.downloadFormsOnly?this.$http.post("cluster/download",r,{responseType:"blob"}).then(function(e){return e.blob()}).then(function(e){var r=document.createElement("a");document.body.appendChild(r);var a=window.URL.createObjectURL(e);r.href=a,r.download="cluster.zip",r.click(),window.URL.revokeObjectURL(a),r.remove(),t.terraformFilesDownloaded=!0}):this.$http.post("cluster",r).then(function(e){console.log(e),t.error=null,t.timer=setInterval(t.pollForClusterCreationResult,1e4)},function(e){console.log(e),t.error=e.data,t.loading=!1})},pollForClusterCreationResult:function(){var e=this;this.$http.get("cluster/result").then(function(t){console.log(t),e.clusterCreationResponse=t.data,"FINISHED"===t.data.status&&(clearInterval(e.timer),t.data.error?e.error=t.data.error:(e.clusterCreated=!0,e.error=null))},function(t){clearInterval(e.timer),console.log(t),e.error=t.data,alert(t.data)})},createItems:function(e){var t=[];for(var r in e)t.push({name:r,value:e[r]});return console.log(t),t}}}),n=o,l=r("2877"),i=r("6544"),c=r.n(i),u=r("8336"),d=r("a523"),m=r("8fea"),p=r("490a"),h=r("8e36"),v=r("71d9"),f=r("2a7f"),_=Object(l["a"])(n,a,s,!1,null,null,null);_.options.__file="CreateCluster.vue";t["default"]=_.exports;c()(_,{VBtn:u["a"],VContainer:d["a"],VDataTable:m["a"],VProgressCircular:p["a"],VProgressLinear:h["a"],VToolbar:v["a"],VToolbarTitle:f["a"]})}}]);
//# sourceMappingURL=chunk-2d216bc4.2370be33.js.map