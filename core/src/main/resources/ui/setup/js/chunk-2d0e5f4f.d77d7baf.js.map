{"version":3,"sources":["webpack:///./src/views/Install.vue?3d3e","webpack:///src/views/Install.vue","webpack:///./src/views/Install.vue?75c8","webpack:///./src/views/Install.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","grid-list-md","loading","installationComplete","error","_e","_v","indeterminate","_s","terraformOutput","size","code","href","target","color","on","click","install","message","to","name","params","csp","mode","flat","items","createItems","terraformResult","createdResources","hide-actions","hide-headers","scopedSlots","_u","key","fn","props","item","value","outputs","redirectToParamSet","staticRenderFns","Installvue_type_script_lang_js_","data","$route","parameters","timer","watch","mounted","methods","_this","payload","$http","post","then","response","console","log","setInterval","pollForInstallResult","_this2","get","region","output","status","clearInterval","alert","_this3","$router","push","paramSets","jsonObject","views_Installvue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__","installComponents_default","VBtn","VContainer","VDataTable","VProgressCircular","VProgressLinear","VToolbar","VToolbarTitle","components_VToolbar"],"mappings":"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","file":"js/chunk-2d0e5f4f.d77d7baf.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticClass:\"ma-5\",attrs:{\"grid-list-md\":\"\"}},[(_vm.loading && !_vm.installationComplete && !_vm.error)?_c('div',[_c('h3',[_vm._v(\"Please wait while Jemo creates the installation resources.\")]),_c('v-progress-linear',{attrs:{\"indeterminate\":true}}),(_vm.terraformOutput)?_c('div',[_c('pre',[_vm._v(_vm._s(_vm.terraformOutput))]),_c('div',{staticClass:\"pa-3\"},[_c('v-progress-circular',{attrs:{\"indeterminate\":\"\",\"size\":16}})],1)]):_vm._e()],1):_vm._e(),(_vm.error)?_c('div',[(_vm.error.code === 'TERRAFORM_NOT_INSTALLED')?_c('div',[_c('h3',[_vm._v(\"The server can not find the terraform command.\")]),_vm._v(\"\\n            Either terraform is not installed (\"),_c('a',{attrs:{\"href\":\"https://learn.hashicorp.com/terraform/getting-started/install.html\",\"target\":\"_blank\"}},[_vm._v(\"Installation\\n            instructions\")]),_vm._v(\"),\\n            or it is not in the path. (e.g. run: terraform -version).\\n\\n            \"),_c('br'),_c('br'),_c('v-btn',{attrs:{\"color\":\"primary\",\"loading\":_vm.loading},on:{\"click\":_vm.install}},[_vm._v(\"Fixed\")])],1):_c('div',[_c('h3',[_vm._v(\"Terraform failed to create the installation resources. The following error occurred:\")]),_c('pre',[_vm._v(_vm._s(_vm.error.message))]),_c('br'),_c('v-btn',{attrs:{\"to\":{name: 'delete', params: {csp: this.csp, mode: 'INSTALL'}},\"color\":\"primary\"}},[_vm._v(\"Revert\")])],1)]):_vm._e(),(_vm.installationComplete)?_c('div',[_c('h3',[_vm._v(\"Setup Completed\")]),_c('br'),_vm._v(\"\\n        Installation has finished successfully. Terraform reported the following created resources and outputs.\\n        \"),_c('br'),_c('br'),_c('v-toolbar',{attrs:{\"flat\":\"\",\"color\":\"white\"}},[_c('v-toolbar-title',[_vm._v(\"Created Resources\")])],1),_c('v-data-table',{staticClass:\"elevation-1\",attrs:{\"items\":_vm.createItems(_vm.terraformResult.createdResources),\"hide-actions\":\"\",\"hide-headers\":\"\"},scopedSlots:_vm._u([{key:\"items\",fn:function(props){return [_c('td',[_vm._v(_vm._s(props.item.name))]),_c('td',[_vm._v(_vm._s(props.item.value))])]}}],null,false,486369009)}),_c('br'),_c('v-toolbar',{attrs:{\"flat\":\"\",\"color\":\"white\"}},[_c('v-toolbar-title',[_vm._v(\"Outputs\")])],1),_c('v-data-table',{staticClass:\"elevation-1\",attrs:{\"items\":_vm.createItems(_vm.terraformResult.outputs),\"hide-actions\":\"\",\"hide-headers\":\"\"},scopedSlots:_vm._u([{key:\"items\",fn:function(props){return [_c('td',[_vm._v(_vm._s(props.item.name))]),_c('td',[_vm._v(_vm._s(props.item.value))])]}}],null,false,486369009)}),_c('br'),_vm._v(\"\\n\\n        Please, click the following button to input Jemo parameters\"),_c('br'),_c('br'),_c('v-btn',{attrs:{\"color\":\"primary\"},on:{\"click\":_vm.redirectToParamSet}},[_vm._v(\"Next\")])],1):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\n    <v-container grid-list-md class=\"ma-5\">\n\n        <div v-if=\"loading && !installationComplete && !error\">\n            <h3>Please wait while Jemo creates the installation resources.</h3>\n            <v-progress-linear :indeterminate=\"true\"></v-progress-linear>\n            <div v-if=\"terraformOutput\">\n                <pre>{{terraformOutput}}</pre>\n                <div class=\"pa-3\">\n                    <v-progress-circular indeterminate :size=\"16\"></v-progress-circular>\n                </div>\n            </div>\n        </div>\n\n        <div v-if=\"error\">\n            <div v-if=\"error.code === 'TERRAFORM_NOT_INSTALLED'\">\n                <h3>The server can not find the terraform command.</h3>\n                Either terraform is not installed (<a\n                    href=\"https://learn.hashicorp.com/terraform/getting-started/install.html\" target=\"_blank\">Installation\n                instructions</a>),\n                or it is not in the path. (e.g. run: terraform -version).\n\n                <br/>\n                <br/>\n                <v-btn @click=\"install\" color=\"primary\" :loading=\"loading\">Fixed</v-btn>\n            </div>\n            <div v-else>\n                <h3>Terraform failed to create the installation resources. The following error occurred:</h3>\n                <pre>{{error.message}}</pre>\n                <br/>\n                <v-btn :to=\"{name: 'delete', params: {csp: this.csp, mode: 'INSTALL'}}\" color=\"primary\">Revert</v-btn>\n            </div>\n        </div>\n\n        <div v-if=\"installationComplete\">\n            <h3>Setup Completed</h3>\n            <br/>\n            Installation has finished successfully. Terraform reported the following created resources and outputs.\n            <br/>\n            <br/>\n\n            <v-toolbar flat color=\"white\">\n                <v-toolbar-title>Created Resources</v-toolbar-title>\n            </v-toolbar>\n            <v-data-table\n                    :items=createItems(terraformResult.createdResources)\n                    class=\"elevation-1\"\n                    hide-actions\n                    hide-headers\n            >\n                <template slot=\"items\" slot-scope=\"props\" >\n                    <td>{{ props.item.name }}</td>\n                    <td>{{ props.item.value }}</td>\n                </template>\n            </v-data-table>\n\n            <br/>\n\n            <v-toolbar flat color=\"white\">\n                <v-toolbar-title>Outputs</v-toolbar-title>\n            </v-toolbar>\n            <v-data-table\n                    :items=createItems(terraformResult.outputs)\n                    class=\"elevation-1\"\n                    hide-actions\n                    hide-headers\n            >\n                <template slot=\"items\" slot-scope=\"props\" >\n                    <td>{{ props.item.name }}</td>\n                    <td>{{ props.item.value }}</td>\n                </template>\n            </v-data-table>\n\n            <br/>\n\n            Please, click the following button to input Jemo parameters<br/><br/>\n\n            <v-btn @click=\"redirectToParamSet\" color=\"primary\">Next</v-btn>\n        </div>\n\n    </v-container>\n</template>\n\n<script>\n    export default {\n        data() {\n            return {\n                csp: this.$route.params.csp,\n                parameters: this.$route.params.parameters,\n                installationComplete: false,\n                error: null,\n                terraformResult: null,\n                terraformOutput: null,\n                loading: false,\n                timer: null\n            }\n        },\n        watch: {\n            '$route'(to) {\n                if (to.name === 'install') {\n                    if (to.params.csp) {\n                        this.csp = to.params.csp;\n                        this.parameters = to.params.parameters ? to.params.parameters : this.parameters;\n                        this.installationComplete = false;\n                        this.loading = false;\n                        this.error = null;\n                        this.terraformResult = null;\n                        this.terraformOutput = null;\n                        this.install();\n                    }\n                }\n            }\n        },\n        mounted() {\n            this.install();\n        },\n        methods: {\n            install() {\n                this.loading = true;\n                const payload = {\n                    csp: this.csp.name,\n                    parameters: this.parameters\n                };\n                this.$http.post('install', payload)\n                    .then(response => {\n                        console.log(response);\n                        this.timer = setInterval(this.pollForInstallResult, 10000);\n                    }, response => {\n                        console.log(response);\n                        this.error = response.data;\n                    });\n            },\n            pollForInstallResult() {\n                this.$http.get('install/result/' + this.csp.name + \"/\" + this.parameters.region)\n                    .then(response => {\n                        console.log(response);\n                        this.terraformOutput = response.data.output;\n                        if (response.data.status === 'FINISHED') {\n                            clearInterval(this.timer);\n                            if (response.data.error) {\n                                this.error = response.data.error;\n                            } else {\n                                this.installationComplete = true;\n                                this.error = null;\n                                this.terraformResult = response.data.terraformResult;\n                            }\n                        }\n                    }, response => {\n                        clearInterval(this.timer);\n                        console.log(response);\n                        this.error = response.data;\n                        alert(response.data);\n                    });\n            },\n            redirectToParamSet() {\n                this.$http.get('jemoparams/paramsets/' + this.csp.name)\n                    .then(response => {\n                        console.log(response);\n                        this.$router.push({name: 'jemo-param-set', params: {csp: this.csp, paramSets: response.data}})\n                    }, response => {\n                        console.log(response);\n                        alert(response.data);\n                    });\n            },\n            createItems(jsonObject) {\n                const items = [];\n                for (let key in jsonObject) {\n                    items.push({\n                        name: key,\n                        value: jsonObject[key]\n                    });\n                }\n                console.log(items);\n                return items;\n            }\n        }\n    }\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Install.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Install.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Install.vue?vue&type=template&id=14f9e744&\"\nimport script from \"./Install.vue?vue&type=script&lang=js&\"\nexport * from \"./Install.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!/Users/ioannistheocharis/IdeaProjects/jemo-github/setup-ui/node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib'\nimport { VContainer } from 'vuetify/lib'\nimport { VDataTable } from 'vuetify/lib'\nimport { VProgressCircular } from 'vuetify/lib'\nimport { VProgressLinear } from 'vuetify/lib'\nimport { VToolbar } from 'vuetify/lib'\nimport { VToolbarTitle } from 'vuetify/lib'\ninstallComponents(component, {VBtn,VContainer,VDataTable,VProgressCircular,VProgressLinear,VToolbar,VToolbarTitle})\n"],"sourceRoot":""}